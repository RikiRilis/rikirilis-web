---
import Copy from "@/icons/Copy.astro";
import Check from "@/icons/Check.astro";
import Chat from "@/icons/Chat.astro";
import { SendForm } from "@/components/SendForm.jsx";
import { getI18N } from "@/languages/index.ts";

const email: string = "rikelvicapellan15@gmail.com";
const { currentLocale } = Astro;
const i18n = getI18N({ currentLocale });
---

<h2
    class="flex items-center gap-x-3 text-3xl font-semibold sm:text-4xl text-slate-200 mb-8"
>
    <Chat class="size-8" />
    {i18n.CONTACT}
</h2>

<div class="flex flex-col w-full sm:flex-row sm:justify-between gap-4 mt-4">
    <div class="flex-1">
        <p class="text-slate-400 mb-6 text-pretty">
            <strong class="text-cyan-600">{i18n.CONTACT_TXT_1}</strong>
            {i18n.CONTACT_TXT_2}
            <a
                rel="noopener noreferrer"
                href="https://instagram.com/rikirilis"
                target="_blank"
                class="text-cyan-600 hover:text-slate-300 transition-colors font-bold hover:underline"
                >Instagram</a
            >
            {i18n.OR}
            <a
                rel="noopener noreferrer"
                href="https://twitter.com/rikirilis_"
                target="_blank"
                class="text-cyan-600 hover:text-slate-300 transition-colors font-bold hover:underline"
                >X</a
            >.
        </p>

        <p class="text-slate-400 mb-6 text-pretty">
            {i18n.CONTACT_TXT_3}
            <strong class="text-cyan-600">{i18n.CONTACT_TXT_4}</strong>
            {i18n.CONTACT_TXT_5}
        </p>

        <div
            class="w-fit h-fit flex flex-row items-center justify-center px-2 gap-2 rounded-xl bg-cyan-800 bg-opacity-20 text-cyan-600"
        >
            <h5 id="email" class="text-cyan-600 font-bold">{email}</h5>

            <Copy
                id="copyEmailIcon"
                class="inline-block transition-transform hover:scale-105 hover:text-slate-400 cursor-pointer w-5 h-5"
            />

            <Check id="copiedEmailIcon" class="text-cyan-600 w-5 h-5 hidden" />
        </div>
    </div>

    <SendForm currentLocale={currentLocale} client:visible />
</div>

<script>
    document.addEventListener("astro:page-load", () => {
        const copyEmailIcon = document.getElementById(
            "copyEmailIcon",
        ) as HTMLOrSVGImageElement;
        const copiedEmailIcon = document.getElementById(
            "copiedEmailIcon",
        ) as HTMLOrSVGImageElement;

        copyEmailIcon.addEventListener("click", () => {
            copyEmailIcon.classList.remove("inline-block");
            copyEmailIcon.classList.add("hidden");
            copiedEmailIcon.classList.add("inline-block");
            copiedEmailIcon.classList.remove("hidden");

            navigator.clipboard.writeText("rikelvicapellan15@gmail.com");

            setTimeout(() => {
                copyEmailIcon.classList.add("inline-block");
                copyEmailIcon.classList.remove("hidden");
                copiedEmailIcon.classList.remove("inline-block");
                copiedEmailIcon.classList.add("hidden");
            }, 3000);
        });
    });
</script>
